; Файл параметров инициализации для субмодуля FM214x3gda
; на базовом модуле FMC107

[Option]
ServiceName =  DAC214x3GDA ; Имя службы ЦАП
;ServiceName =  DAC ; Имя службы ЦАП
WorkMode    =1; Режим теста
; 0 - однократный вывод с помощью ЦПУ через FIFO (в программном цикле)
; 1 - однократный вывод с помощью ПДП через FIFO (в программном цикле)
; 2 - однократный вывод с помощью ПДП через SDRAM (в программном цикле)
; 3 - вывод из FIFO в режиме рестарта
; 4 - вывод из SDRAM в режиме рестарта 
; 5 - циклический вывод из FIFO
; 6 - непрерывный вывод с помощью ПДП через FIFO
; 7 - циклический вывод из SDRAM
; 8 - непрерывный вывод с помощью ПДП SDRAM как FIFO

Cycle =1; Циклический режим ввода в буфер
QuickQuit = 0; Выход без ожидания anykey

IsAlwaysWriteSdram = 0   ; Как записывать в SDRAM если WorkMode = 2: 0-только в первом цикле, 1-в каждом цикле
SamplesPerChannel  = 1024  ; Число отсчётов на канал 
;SamplesPerChannel  = 40960  ; Число отсчётов на канал 
;SamplesPerChannel  = 196608000 ; Число отсчётов на канал (режим 6) Выходной буфер должен быть не меньше 1 Мб
IsSystemMemory     = 0    ; Тип выделяемой памяти для буфера данных (0-1):
                          ; 0 - пользовательская память (доступен максимальный размер)
                          ; 1 - системная память(доступна максимальная скорость)
SdramWriteBufSize = 16 ; Размер буфера одной записи в SDRAM КБайт
;IsAlwaysLoadPld   = 0  ; В каких случаях загружать прошивку ПЛИС
                        ; 0 - загружать прошивку только если она не загружена
                       ; 1 - всегда загружать прошивку при старте программы
MasterSlave = -1 ; Межмодульная синхронизация: -1 - независимые платы, 0 и больше - номер МАСТЕРА в режиме Master/Slave

;SignalFreq = 312500000 ; Частота выходного сигнала (Гц)
SignalFreq = 100000000 ; Частота выходного сигнала (Гц)
;SignalFreq = 250000000 ; Частота выходного сигнала (Гц)
SignalType = 0      ; Тип формируемого выходного сигнала: 0-синус, 2-меандр

;SignalFile = example.bin

DebugMarker= 0			; для настройки аппаратуры

TimeoutSec = 13

; ------------------------------------------------------------------------------
[device0_DAC214x3GDA0]
;[device0_DAC0]
; ------------------------------------------------------------------------------

DebugInfo=1

;RegFileName=fm214x3gda_dac.ini 
;RegFileName=ext_sysref.ini 
;RegFileName=closing_en.ini 
;RegFileName=ad9176.ini 


;ClockSource = 0x3   ; Тактовый генератор: 0-выкл., 1-внутренний, 2-внутр+PLL, 3-внеш+PLL, 0x81-внешний, 0x85-базмодуль
ClockSource = 0x3
; Тактовый генератор: 0-выкл., 1-внутренний, 2-внутр+PLL, 3-внеш+PLL, 0x81-внешний, 0x85-базмодуль
BaseClockValue = 100.0
; Частота тактового генератора на базовом модуле в МГц

;Ampl0 = 10000 ; Амплитуда генерируемого сигнала (для всех каналов)
Ampl0  = 32000 ; Амплитуда генерируемого сигнала (канал 0) (емр)
Phase0 = 0     ; Начальная фаза генерируемого сигнала (канал 0) (град)
Ampl1  = 32000
Phase1 = 90
Ampl2  = 000
Phase2 = 0
Ampl3  = 000
Phase3 = 90
Ampl4  = 000
Phase4 = 0
Ampl5  = 000
Phase5 = 90
;Ampl6  = 32000 ; 
Ampl6  = 16000 ; 
Phase6 = 0
Ampl7  = 16000 ;  
Phase7 = 90
Ampl8  = 000 ; 
Phase8 = 180
Ampl9  = 000 ; 
Phase9 = 270
Ampl10  = 000 ; 
Phase10 = 180
Ampl11  = 000 ; 
Phase11= 270

; Выбор режима работы

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 3 

;ClockValue = 12000.0 ; Частота внутреннего/внешнего тактового генератора в МГц
;ClockValue = 12600.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0xC3 ; [000011'000011] Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0x03 ; [000011'000011] Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 3          ; Режим JESD'а
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;CH_Mode = 2            ; Режим интерполяции каналов
;DP_Mode = 8            ; Режим интерполяции выходных каналов
;LMFCVar = 10	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 4           ; Калибровочное значение для JESD линков (Delay)
;LMFCCount = 198

;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 21 

;ClockValue = 2500.0 ; Частота внутреннего/внешнего тактового генератора в МГц
;ClockValue = 3000.0 ; Частота внутреннего/внешнего тактового генератора в МГц
;ClockMult   = 2    ; ЦАП коэффициент умножения входной частоты

;ChannelMask = 0x1 ; [000000'000001] Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 21     ; Режим JESD'а
;JESD_Mode_Dual = 0  ; Режим линка Dual, если `false`, то Single


;LMFCVar = 5	    ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 2         ; Калибровочное значение для JESD линков (Delay)
;LMFCCount = 211

;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 19 

;ClockValue = 3100.0 ; Частота внутреннего/внешнего тактового генератора в МГц
;ClockValue = 2500.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0x01 ; [000000'000001] Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0x41 ; [000001'000001] Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 19          ; Режим JESD'а
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;LMFCVar =5	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel =1        ; Калибровочное значение для JESD линков (Delay)
;LMFCCount = 214

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 0 

;ClockValue = 6160.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0xc3 ;  Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 0          ; Режим JESD'а
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;CH_Mode = 4            ; Режим интерполяции каналов
;DP_Mode = 8            ; Режим интерполяции выходных каналов
;LMFCVar = 9	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 5           ; Калибровочное значение для JESD линков (Delay)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 1 

;ClockValue = 12600.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0x3cf ;  Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0xf ;  Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 1          ; Режим JESD'а
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;CH_Mode = 4            ; Режим интерполяции каналов
;DP_Mode = 8            ; Режим интерполяции выходных каналов
;LMFCVar = 9	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 5           ; Калибровочное значение для JESD линков (Delay);

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 11 

;ClockValue = 12600.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0x3 ;  Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 11          ; Режим JESD'а
;CH_Mode = 1            ; Режим интерполяции каналов
;DP_Mode = 4            ; Режим интерполяции выходных каналов
;LMFCVar = 8	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 10           ; Калибровочное значение для JESD линков (Delay)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 4 

;ClockValue = 12600.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0x3cf ;  Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0xf ;  Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 4         ; Режим JESD'а
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;CH_Mode = 4            ; Режим интерполяции каналов
;DP_Mode = 8            ; Режим интерполяции выходных каналов
;LMFCVar = 5	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 5           ; Калибровочное значение для JESD линков (Delay)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 7 

;ClockValue = 12600.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0x3cf ;  Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0xf ;  Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 7         ; Режим JESD'а;
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;CH_Mode = 8            ; Режим интерполяции каналов
;DP_Mode = 8            ; Режим интерполяции выходных каналов
;LMFCVar = 5	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 37           ; Калибровочное значение для JESD линков (Delay)
;LMFCCount = 775

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 2 

;ClockValue = 12600.0 ; Частота внутреннего/внешнего тактового генератора в МГц
;ClockValue = 6200.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ChannelMask = 0xfff ;  Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0x3f ;  Маска каналов логических ЦАП: максимум 12 каналов
;JESD_Mode = 2         ; Режим JESD'а
;JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
;CH_Mode = 4            ; Режим интерполяции каналов
;DP_Mode = 8            ; Режим интерполяции выходных каналов
;LMFCVar = 16	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
;LMFCDel = 30           ; Калибровочное значение для JESD линков (Delay)
;LMFCCount = 200

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  mode 9 

;ClockValue = 12000.0 ; Частота внутреннего/внешнего тактового генератора в МГц

;ClockValue = 3100.0 ; Частота внутреннего/внешнего тактового генератора в МГц
ClockValue = 2500.0 ; Частота внутреннего/внешнего тактового генератора в МГц
ClockMult      = 4      ; ЦАП коэффициент умножения входной частоты

ChannelMask = 0x0c3 ;  Маска каналов логических ЦАП: максимум 12 каналов
;ChannelMask = 0x003 ;  Маска каналов логических ЦАП: максимум 12 каналов
JESD_Mode = 9         ; Режим JESD'а
JESD_Mode_Dual = true  ; Режим линка Dual, если `false`, то Single
CH_Mode = 1            ; Режим интерполяции каналов
DP_Mode = 8            ; Режим интерполяции выходных каналов
LMFCVar = 5	          ; Калибровочное значение для JESD линков (Variable Delay Buffer)
LMFCDel = 1           ; Калибровочное значение для JESD линков (Delay)
LMFCCount = 178


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

; Значения несущей частоты для DAC0 и DAC1 в Гц
;MainNCO0 = 00000000
;MainNCO1 = 00000000
MainNCO0 = 000000000
MainNCO1 = 000000000

Calibration = true ; Включить калибровку выходных каналов

;MainNCO0_Phase = 0
;MainNCO1_Phase = 0

; Значения несущей частоты для каналов перед DAC's в Гц
ChannelNCO0 = 00000000 ; Channel 0 of DAC0
ChannelNCO1 = 00000000 ; Channel 1 of DAC0
ChannelNCO2 = 00000000 ; Channel 2 of DAC0

ChannelNCO3 = 00000000 ; Channel 0 of DAC1
ChannelNCO4 = 00000000 ; Channel 1 of DAC1
ChannelNCO5 = 00000000 ; Channel 2 of DAC1


; Включение/Отключение синтезатора (DDS)
DDSEnable = 0

; Амплитуда синтезируемого сигнала DDS по каналам
DDSAmpl0 = 0x4000
DDSAmpl1 = 0x0000
DDSAmpl2 = 0x0000
DDSAmpl3 = 0x4000
DDSAmpl4 = 0x0000
DDSAmpl5 = 0x0000

; SPI
SPI_FMC = false
; ------------------------------------------------------------------------------
; Предварительная синхронизация JESD'ов
; ------------------------------------------------------------------------------
PreSync = true

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

; Управление стартом

MasterMode=1		                ; 1 - всегда

StartBaseSource=0
; Базовый источник старта: 0 - программный, 7 - от субмодуля, 10 - от DDS
StartBaseInverting=1		        ; Инверсия базового источника старта: 0-нет, 1-есть
StartMode=1			        ; Тип старта: 1 – тригерный, 0 – потенциальный
StopSource=0			        ; Базовый источник останова при тригерном старте
StopInverting=0			        ; Инверсия базового источника останова: 0-нет, 1-есть

StartLevel=1		; Уровень старта (Вольт): 0 .. +5
StartResistance= 1		; Входное сопротивление входа внешнего старта: 0 - 1 кOм, 1 - 50 Oм

StartDelayEnable= 0		; Разрешение счетчика CNT0: 0 - не разрешен, 1 - разрешен
StartDelayCounter= 8		; Содержимое счетчика CNT0

SkipSampleEnable= 0		; Разрешение счетчика CNT2: 0 - не разрешен, 1 - разрешен
SkipSampleCounter= 0		; Содержимое счетчика CNT2



;SysRefConfig = 0x02 ; выбор иточника сигнала SysRef на ЦАП:  0x2 - внешний, 0x0 - от ПЛИС
;SysRefLevel = 1.0 ; уровень внешнего сигнала SysRef (В): 0.0 .. +5.0


;StdDelay9=0x1f   ;  задержка  выхода tx_sysref
